# =============================================================================
# Terraform Variables Example - Authorizer Project
# =============================================================================
# Copie este arquivo para terraform.tfvars e ajuste os valores conforme necessário
# =============================================================================

# =============================================================================
# CONFIGURAÇÕES BÁSICAS
# =============================================================================
project_name = "authorizer"
environment  = "dev"  # dev, staging, prod
aws_region   = "sa-east-1"
owner        = "authorizer-team"

# =============================================================================
# CONFIGURAÇÕES DE SEGURANÇA
# =============================================================================
enable_dynamodb_encryption = true
enable_deletion_protection  = false  # true para produção
sqs_kms_encryption         = true

# =============================================================================
# RECURSOS OPCIONAIS
# =============================================================================
create_iam_resources = true
enable_monitoring   = true
alarm_email        = "alerts@yourcompany.com"  # Configure seu email

# =============================================================================
# CONFIGURAÇÕES DE PERFORMANCE
# =============================================================================
dynamodb_performance_mode = "PAY_PER_REQUEST"  # ou "PROVISIONED"

# Para modo PROVISIONED (descomente se necessário)
# provisioned_read_capacity  = 5
# provisioned_write_capacity = 5

# =============================================================================
# CONFIGURAÇÕES DE BACKUP
# =============================================================================
enable_dynamodb_backup       = true
dynamodb_point_in_time_recovery = true
backup_retention_days        = 7

# =============================================================================
# OTIMIZAÇÃO DE CUSTOS
# =============================================================================
enable_cost_optimization = true

# =============================================================================
# CONFIGURAÇÕES DE REDE (FUTURO USO)
# =============================================================================
# vpc_id     = "vpc-xxxxxxxxx"
# subnet_ids = ["subnet-xxxxxxxxx", "subnet-yyyyyyyyy"]

# =============================================================================
# CONFIGURAÇÕES ESPECÍFICAS POR AMBIENTE
# =============================================================================

# Para ambiente de desenvolvimento
# enable_monitoring = false
# alarm_email      = ""

# Para ambiente de staging
# enable_monitoring = true
# backup_retention_days = 14

# =============================================================================
# CONFIGURAÇÕES MSK (KAFKA)
# =============================================================================
enable_msk                  = true
msk_kafka_version          = "2.8.1"
msk_number_of_broker_nodes = 3
msk_instance_type          = "kafka.m5.large"  # Para prod: kafka.m5.xlarge ou kafka.m5.2xlarge
msk_ebs_volume_size        = 100

# Segurança MSK
msk_enable_encryption_at_rest            = true
msk_encryption_in_transit_client_broker = "TLS"
msk_encryption_in_transit_in_cluster    = true

# Monitoramento MSK
msk_enhanced_monitoring   = "PER_BROKER"
msk_enable_logging       = true
msk_log_retention_days   = 7

# Tópico transaction-executed-event
msk_create_topics                           = true
msk_transaction_topic_partitions           = 3
msk_transaction_topic_replication_factor   = 3

# Para ambiente de produção
# enable_deletion_protection = true
# backup_retention_days = 30
# enable_monitoring = true
# alarm_email = "production-alerts@yourcompany.com"

# Para ambiente de produção - MSK
# msk_instance_type = "kafka.m5.xlarge"
# msk_ebs_volume_size = 500
# msk_enhanced_monitoring = "PER_TOPIC_PER_BROKER"
# msk_log_retention_days = 30

# =============================================================================
# CONFIGURAÇÕES EKS (KUBERNETES)
# =============================================================================
enable_eks                 = true
eks_kubernetes_version     = "1.28"
eks_endpoint_private_access = true
eks_endpoint_public_access  = true

# Node Group EKS
eks_node_group_instance_types  = ["t3.medium"]  # Para prod: ["m5.large", "m5.xlarge"]
eks_node_group_capacity_type   = "ON_DEMAND"    # Para dev/test: "SPOT"
eks_node_group_desired_size    = 2
eks_node_group_max_size       = 4
eks_node_group_min_size       = 1
eks_node_group_disk_size      = 20

# Logging EKS
eks_cluster_log_types          = ["api", "audit", "authenticator"]
eks_cluster_log_retention_days = 7

# Aplicação Authorization
eks_authorization_app_image          = "app-authorization:latest"
eks_authorization_app_replicas       = 2
eks_authorization_app_cpu_request    = "100m"
eks_authorization_app_cpu_limit      = "500m"
eks_authorization_app_memory_request = "512Mi"
eks_authorization_app_memory_limit   = "1Gi"

# Aplicação Validation
eks_validation_app_image          = "app-validation:latest"
eks_validation_app_replicas       = 2
eks_validation_app_cpu_request    = "100m"
eks_validation_app_cpu_limit      = "500m"
eks_validation_app_memory_request = "512Mi"
eks_validation_app_memory_limit   = "1Gi"

# Configurações Kubernetes
eks_create_namespace     = false  # usar namespace "default"
eks_namespace_name      = "authorizer"
eks_enable_load_balancer = true
eks_load_balancer_type   = "application"
eks_enable_hpa          = false

# Configurações opcionais
# eks_schema_registry_url    = "http://schema-registry.example.com:8081"
# eks_domain_name           = "authorizer.example.com"
# eks_ssl_certificate_arn   = "arn:aws:acm:sa-east-1:123456789012:certificate/12345678-1234-1234-1234-123456789012"

# Para ambiente de produção - EKS
# eks_node_group_instance_types = ["m5.large", "m5.xlarge"]
# eks_node_group_desired_size = 3
# eks_node_group_max_size = 10
# eks_authorization_app_replicas = 3
# eks_validation_app_replicas = 3
# eks_enable_hpa = true
# eks_cluster_log_types = ["api", "audit", "authenticator", "controllerManager", "scheduler"]
# eks_cluster_log_retention_days = 30
